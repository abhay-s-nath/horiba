<div class="graph-container">
  <div class="graph-header">
    <h3 class="title">{{ title }}</h3>
    <div class="filters">
      <input #datepicker #dateInput class="date-input" placeholder="Start â€“ End" readonly />
      
      <button class="filter-btn" (click)="applyFilter(dateInput.value)" [disabled]="isLoading">
        <div *ngIf="isLoading" class="spinner"></div>
        <span *ngIf="!isLoading">FILTER</span>
      </button>
    </div>
  </div>

  <div class="graph-box">
    <highcharts-chart 
      *ngIf="chartOptions.series"
      [Highcharts]="Highcharts"
      [options]="chartOptions"
      [callbackFunction]="chartCallback"
      [(update)]="updateFlag"
      [oneToOne]="oneToOneFlag"
      style="width: 100%; height: 320px; display: block;">
    </highcharts-chart>
  </div>

  <table class="summary-table">
    <thead>
      <tr>
        <th>Component</th>
        <th>Average</th>
        <th>Minimum</th>
        <th>Maximum</th>
        <th>R Limit</th>
        <th>Unit</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of tableData">
        <td>{{ row.component }}</td>
        <td>{{ row.avg }}</td>
        <td>{{ row.min }}</td>
        <td>{{ row.max }}</td>
        <td>{{ row.limit }}</td>
        <td>{{ row.unit }}</td>
      </tr>
    </tbody>
  </table>
</div>